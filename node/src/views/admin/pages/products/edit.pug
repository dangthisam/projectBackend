extends ../../layouts/default.pug
include ../../mixins/alert.pug
block main
  +alertError(5000)
  .container.mt-5
   
    h1.mb-4.text-emphasis Chỉnh sửa Chuyến bay
   
  
    // Hiển thị thông báo lỗi
    if messages && messages.error
      .alert.alert-danger.alert-dismissible.fade.show(role="alert")
        span= messages.error
        button(type="button", class="btn-close", data-bs-dismiss="alert", aria-label="Close")

    // Hiển thị thông báo thành công
    if messages && messages.success
      .alert.alert-success.alert-dismissible.fade.show(role="alert")
        span= messages.success
        button(type="button", class="btn-close", data-bs-dismiss="alert", aria-label="Close")

    form(action=`${prefixAdmin}/products/edit/${product._id}?_method=PATCH`, method="POST", enctype="multipart/form-data")
      .card.shadow-sm.rounded.p-4.mb-4
        .card-body
          .form-group.mb-3
            label(for="title") Tiêu đề
            input(type="text", class="form-control", id="title", name="title",  minlength="5", placeholder="Nhập tiêu đề sản phẩm (ít nhất 5 ký tự)" , value=product.title)

          .form-group.mb-3
            label(for="desc") Mô tả
            textarea.form-control(id="desc", name="description", rows="5", placeholder="Nhập mô tả sản phẩm", required , value=product.description) #{product.description}</textarea>

          .form-group.mb-3
            label(for="price") Giá
            input(type="number", class="form-control", id="price", name="price", min="0", placeholder="Nhập giá sản phẩm", required, value=product.price)

          .form-group.mb-3
            label(for="discount") % Giảm giá
            input(type="number", class="form-control", id="discount", name="discountPercentage", min="0", max="100", placeholder="Nhập % giảm giá (0-100)", value=product.discountPercentage)

          .form-group.mb-3
            label(for="stock") Số lượng
            input(type="number", class="form-control", id="stock", name="stock", min="0", placeholder="Nhập số lượng sản phẩm", required, value=product.stock)

          div( 
            class="form-group mb-3"
            data-upload-image
            )
            label(for="thumbnail") Ảnh
            input(type="text", class="form-control-file", id="thumbnail", name="thumbnail", accept="image/*", data-upload-image-input, value=product.thumbnail)
            img(
              src=""
              class="image-preview"
              data-upload-image-preview
            )
            button(type="button", class="btn btn-danger btn-sm mt-2", data-upload-image-remove) X
          .form-group.mb-3
            label(for="position") Vị trí
            input(type="number", class="form-control", id="position", name="position", placeholder="Tự động tăng", min="-2")


          .form-group.mb-3
            label.d-block Trạng thái
            .form-check.form-check-inline
              input(type="radio", class="form-check-input", id="statusActive", name="status", value="active", checked=(product.status === 'active' ? true : false))
              label(for="statusActive", class="form-check-label") Hoạt động
            .form-check.form-check-inline
              input(type="radio", class="form-check-input", id="statusInactive", name="status", value="inactive", checked=(product.status === 'inactive' ? true : false))
              label(for="statusInactive", class="form-check-label") Ngừng hoạt động

          .form-group.mt-4.d-flex.justify-content-between
            button(type="submit", class="btn btn-primary btn-lg") CẬP NHẬT
            a(href=`${prefixAdmin}/products`, class="btn btn-secondary btn-lg") Hủy